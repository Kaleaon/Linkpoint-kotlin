# Application Configuration for SecondLife Viewer Kotlin Implementation
# This replaces various XML and INI configuration files from the original C++ viewer
# with a modern HOCON (Human-Optimized Config Object Notation) format

secondlife {
    # Application metadata
    application {
        name = "SecondLife Viewer - Kotlin Edition"
        version = "2.0.0-SNAPSHOT"
        build = ${?BUILD_NUMBER}
        
        # Platform detection
        platform = ${?OS_NAME}
        architecture = ${?OS_ARCH}
        
        # Feature flags
        features {
            voice_enabled = true
            media_streaming = true
            advanced_lighting = true
            atmospheric_shaders = true
            materials_enabled = true
            mesh_enabled = true
            http_textures = true
        }
    }
    
    # Network configuration
    network {
        # Message system settings
        message_system {
            # Maximum message size in bytes
            max_message_size = 32768
            
            # Buffer sizes
            receive_buffer_size = 65536
            send_buffer_size = 32768
            
            # Timeout settings
            packet_timeout_seconds = 5.0
            circuit_timeout_seconds = 60.0
            
            # Reliability settings
            max_retries = 3
            retry_backoff_multiplier = 2.0
            
            # Throttling
            max_packets_per_second = 1000
            max_bytes_per_second = 1048576  # 1MB/s
        }
        
        # Circuit management
        circuits {
            max_circuits = 256
            cleanup_interval_seconds = 30
            allow_timeouts = true
            
            # Health monitoring
            packet_loss_threshold = 5.0    # percentage
            ping_threshold_ms = 1000.0
            degraded_threshold = 10.0      # packet loss percentage
            blocked_threshold = 25.0       # packet loss percentage
        }
        
        # Connection settings
        connection {
            # Login servers
            login_servers = [
                "https://login.agni.lindenlab.com/cgi-bin/login.cgi",
                "https://login.aditi.lindenlab.com/cgi-bin/login.cgi"
            ]
            
            # Default grid
            default_grid = "agni"  # or "aditi" for beta grid
            
            # Proxy settings
            proxy {
                enabled = false
                type = "http"  # http, socks4, socks5
                host = ""
                port = 0
                username = ""
                password = ""
            }
            
            # SSL/TLS settings
            ssl {
                verify_certificates = true
                ca_bundle_path = "ca-bundle.crt"
                cipher_suites = ["TLS_AES_256_GCM_SHA384", "TLS_CHACHA20_POLY1305_SHA256"]
            }
        }
        
        # UDP settings
        udp {
            # Local ports
            viewer_port_start = 12000
            viewer_port_end = 13000
            
            # Socket options
            so_rcvbuf = 262144   # 256KB
            so_sndbuf = 262144   # 256KB
            so_timeout = 100     # milliseconds
            
            # IPv6 support
            ipv6_enabled = true
            prefer_ipv4 = true
        }
    }
    
    # Graphics and rendering
    graphics {
        # Renderer selection
        renderer = "opengl"  # opengl, vulkan, metal
        
        # Quality settings
        quality {
            # Overall quality preset
            preset = "high"  # low, medium, high, ultra
            
            # Specific settings
            texture_quality = 3      # 0-4 (lowest to highest)
            mesh_lod_factor = 1.25   # Level of detail multiplier
            draw_distance = 256.0    # meters
            particles_max = 8192     # maximum particle count
            
            # Advanced rendering
            atmospheric_shaders = true
            basic_shaders = true
            vertex_shaders = true
            windlight_shaders = true
            deferred_rendering = true
            
            # Anti-aliasing
            fsaa_samples = 4         # 0, 2, 4, 8, 16
            fsaa_quality = "high"    # low, medium, high
            
            # Shadows
            shadows_enabled = true
            shadow_resolution = 2048 # pixels
            shadow_splits = 4        # cascade splits
        }
        
        # Performance settings
        performance {
            # FPS limits
            max_fps = 60
            vsync_enabled = true
            
            # Memory management
            texture_memory_mb = 512
            vbo_memory_mb = 256
            
            # LOD settings
            automatic_lod = true
            lod_factor = 1.0
            
            # Culling
            frustum_culling = true
            occlusion_culling = true
            backface_culling = true
        }
        
        # Display settings
        display {
            # Window settings
            windowed = true
            fullscreen = false
            window_width = 1920
            window_height = 1080
            window_position_x = 100
            window_position_y = 100
            
            # Color and gamma
            gamma = 1.0
            brightness = 1.0
            contrast = 1.0
            
            # UI scaling
            ui_scale_factor = 1.0
            font_size_adjustment = 0
        }
    }
    
    # Audio system
    audio {
        # Audio driver
        driver = "auto"  # auto, openal, directsound, pulseaudio
        
        # Volume settings
        master_volume = 0.8
        ui_volume = 0.5
        ambient_volume = 0.5
        media_volume = 0.8
        voice_volume = 0.8
        music_volume = 0.3
        
        # Voice chat
        voice {
            enabled = true
            input_device = "default"
            output_device = "default"
            mic_gain = 1.0
            auto_gain_control = true
            noise_suppression = true
            echo_cancellation = true
        }
        
        # Streaming media
        streaming {
            enabled = true
            auto_play = false
            enable_media_on_prims = true
        }
        
        # Doppler effect
        doppler_enabled = true
        doppler_factor = 1.0
        
        # Distance model
        distance_model = "inverse_distance_clamped"
        rolloff_factor = 1.0
    }
    
    # User interface
    ui {
        # Skin and theme
        skin = "default"
        theme = "dark"  # light, dark, auto
        
        # Layout
        show_menu_bar = true
        show_status_bar = true
        show_navigation_bar = true
        
        # Chat settings
        chat {
            max_history = 1000
            font_size = 9
            chat_bubble_opacity = 1.0
            translate_chat = false
            time_format = "12hour"  # 12hour, 24hour
        }
        
        # IM settings
        instant_message {
            play_sound = true
            show_timestamps = true
            log_ims = true
            log_group_ims = true
        }
        
        # Notifications
        notifications {
            show_script_errors = true
            show_script_dialogs = true
            notification_duration = 5000  # milliseconds
        }
        
        # Camera controls
        camera {
            mouse_sensitivity = 1.0
            invert_mouse = false
            smooth_zoom = true
            auto_zoom_out = true
        }
    }
    
    # Cache and storage
    cache {
        # Cache directories
        cache_directory = "cache"
        logs_directory = "logs"
        settings_directory = "user_settings"
        
        # Cache sizes (in MB)
        texture_cache_size = 1024
        mesh_cache_size = 512
        sound_cache_size = 256
        
        # Cache behavior
        auto_purge_cache = true
        cache_validation = true
        
        # Disk cache settings
        disk_cache_enabled = true
        disk_cache_size_mb = 2048
        memory_cache_size_mb = 512
    }
    
    # Security settings
    security {
        # Certificate validation
        verify_ssl_certificates = true
        check_certificate_revocation = true
        
        # Script security
        allow_lsl_http_requests = true
        lsl_http_request_timeout = 30
        
        # Media security
        enable_web_content = true
        enable_javascript = true
        allow_cookies = true
        
        # Privacy
        send_crash_reports = true
        send_usage_stats = false
        
        # Parental controls
        mature_content = true
        adult_content = false
    }
    
    # Logging configuration
    logging {
        # Log levels: TRACE, DEBUG, INFO, WARN, ERROR
        level = "INFO"
        
        # Log destinations
        console_enabled = true
        file_enabled = true
        
        # File settings
        log_file = "logs/viewer.log"
        max_file_size = "10MB"
        max_files = 10
        
        # Component-specific logging
        components {
            network = "INFO"
            graphics = "WARN"
            audio = "WARN"
            ui = "WARN"
            scripts = "INFO"
        }
        
        # Performance logging
        performance_logging = false
        network_stats_logging = false
    }
    
    # Development and debugging
    debug {
        # Debug flags
        show_debug_console = false
        enable_debug_menu = false
        show_fps = true
        show_bandwidth = false
        
        # Profiling
        enable_profiling = false
        profile_network = false
        profile_rendering = false
        
        # Testing
        automated_testing = false
        test_mode = false
    }
    
    # Experimental features
    experimental {
        # New features (may be unstable)
        enable_new_inventory = false
        enable_materials_v2 = false
        enable_pbr_materials = false
        enable_animation_overrides = false
        
        # Beta features
        http_inventory = false
        mesh_v2 = false
        
        # Advanced networking
        http_pipeline = true
        http2_enabled = false
    }
}

# Environment-specific overrides
include "application-development.conf"
include "application-production.conf"